# ===================================
# 核心配置
# ===================================

# 服务器端口
PORT=4999

# 启用调试日志以进行故障排除
DEBUG=false

# ===================================
# Docker 配置
# ===================================

# Docker 主机连接（与 docker-proxy 一起使用以提高安全性）
# DOCKER_HOST=tcp://docker-proxy:2375

# Docker 套接字路径（默认：/var/run/docker.sock）
# DOCKER_SOCK=/var/run/docker.sock

# Docker TLS 验证（1=启用，0=禁用）
# DOCKER_TLS_VERIFY=0

# Docker TLS 证书路径
# DOCKER_CERT_PATH=/path/to/certs

# Docker API 缓存超时（毫秒）
DOCKER_CACHE_CONTAINERS_TTL_MS=4000
DOCKER_CACHE_INSPECT_TTL_MS=5000
DOCKER_CACHE_STATS_TTL_MS=1500
DOCKER_CACHE_PORTS_TTL_MS=4000

# ===================================
# TrueNAS 集成
# ===================================

# 用于增强功能的 TrueNAS API 密钥（VM、容器、系统信息）
# 从 TrueNAS UI 获取：系统设置 > API 密钥
# TRUENAS_API_KEY=

# TrueNAS WebSocket 基础 URL（如果未设置则自动检测）
# 示例：ws://192.168.1.100:80, wss://truenas.local:443
# TRUENAS_WS_BASE=

# 增强功能收集的总超时时间（毫秒）
# 如果看到超时错误，请增加此值（有许多应用/VM 的系统可能需要 120000-180000）
TRUENAS_TIMEOUT_MS=90000

# 单个 API 调用超时（高级调优）
# 仅在特定 API 调用超时时调整这些值（检查日志以了解哪个调用失败）
# - system.info: 基本系统信息（很少变慢）
TRUENAS_SYSTEM_INFO_TIMEOUT_MS=30000
# - app.query: TrueNAS 应用（20+ 个应用时会变慢，增加到 45000-60000）
TRUENAS_APP_QUERY_TIMEOUT_MS=20000
# - vm.query: 虚拟机（如果有许多 VM，请增加）
TRUENAS_VM_QUERY_TIMEOUT_MS=15000
# - virt.instance.query: LXC 容器（如果有许多容器，请增加）
TRUENAS_CONTAINER_QUERY_TIMEOUT_MS=15000

# WebSocket 请求超时（应 >= 最长的单个超时时间）
# 如果增加了单个超时时间，请同时增加此值
TRUENAS_WS_REQUEST_TIMEOUT_MS=40000

# ===================================
# 认证
# ===================================

# 启用认证以保护仪表板访问
ENABLE_AUTH=false

# 用于安全 Cookie 签名的会话密钥
# 为生产环境生成一个强随机字符串
# 如果未设置，将生成一个随机密钥（会话不会在重启后持久化）
# SESSION_SECRET=

# 启用密码重置的恢复模式
# 日志中将显示一个限时恢复代码（有效期 15 分钟）
RECOVERY_MODE=false

# ===================================
# 缓存与性能
# ===================================

# 禁用所有缓存（不推荐用于生产环境）
DISABLE_CACHE=false

# 通用收集器缓存超时
COLLECTOR_CACHE_TTL_MS=30000

# 系统收集器缓存超时
SYSTEM_CACHE_SYSTEMINFO_TTL_MS=15000
SYSTEM_CACHE_PORTS_TTL_MS=5000

# 端口的端点级缓存超时
ENDPOINT_CACHE_PORTS_TTL_MS=3000

# 端口缓存超时
PORT_CACHE_TTL_MS=5000

# 缓存调试日志（用于开发）
CACHE_DEBUG=false
CACHE_DEBUG_VERBOSE=false

# ===================================
# 端口扫描与检测
# ===================================

# 在系统扫描中包含 UDP 端口（可能增加噪音）
INCLUDE_UDP=false

# 主机 /proc 文件系统路径（用于容器化部署）
# HOST_PROC=/host/proc

# ===================================
# 端口生成
# ===================================

# 随机端口生成器范围
GENERATE_PORT_MIN=30000
GENERATE_PORT_MAX=60999

# 端口可用性测试的绑定主机
GENERATE_PORT_BIND_HOST=0.0.0.0
